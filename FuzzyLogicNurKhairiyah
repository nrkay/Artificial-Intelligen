# -*- coding: utf-8 -*-
"""fuzyylogic.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1unASOHa0VSAE2fBi1H8WwbnVG-vX-vB_
"""

import numpy as np
import skfuzzy as fuzzy
from skfuzzy import control as ctrl

from thefuzz import fuzz
import skfuzzy as fuzz

pip install thefuzz

pip install scikit-fuzzy

permintaan = ctrl.Antecedent(np.arange(0, 131, 1), 'Permintaan Produk')
persediaan = ctrl.Antecedent(np.arange(0, 60, 1), 'Persediaan Produk')
produksi = ctrl.Consequent(np.arange(0, 131, 1), 'Banyak Produksi')

permintaan['rendah'] = fuzz.trapmf(permintaan.universe, [0, 0, 40, 76])
permintaan['sedang'] = fuzz.trimf(permintaan.universe, [40, 76, 130])
permintaan['tinggi'] = fuzz.trapmf(permintaan.universe, [76, 120, 130, 130])

persediaan['rendah'] = fuzz.trapmf(persediaan.universe, [0, 0, 10, 21])
persediaan['sedang'] = fuzz.trimf(persediaan.universe, [10, 21, 50])
persediaan['tinggi'] = fuzz.trapmf(persediaan.universe, [21, 40, 50, 50])

produksi['rendah'] = fuzz.trapmf(produksi.universe, [0, 0, 40, 76])
produksi['sedang'] = fuzz.trimf(produksi.universe, [40, 76, 130])
produksi['tinggi'] = fuzz.trapmf(produksi.universe, [76, 120, 130, 130])

rule1 = ctrl.Rule(permintaan['rendah'] & persediaan['tinggi'], produksi['rendah'])
rule2 = ctrl.Rule(permintaan['rendah'] & persediaan['sedang'], produksi['rendah'])
rule3 = ctrl.Rule(permintaan['rendah'] & persediaan['rendah'], produksi['rendah'])
rule4 = ctrl.Rule(permintaan['sedang'] & persediaan['tinggi'], produksi['rendah'])
rule5 = ctrl.Rule(permintaan['sedang'] & persediaan['sedang'], produksi['sedang'])
rule6 = ctrl.Rule(permintaan['sedang'] & persediaan['rendah'], produksi['tinggi'])
rule7 = ctrl.Rule(permintaan['tinggi'] & persediaan['tinggi'], produksi['tinggi'])
rule8 = ctrl.Rule(permintaan['tinggi'] & persediaan['sedang'], produksi['tinggi'])
rule9 = ctrl.Rule(permintaan['tinggi'] & persediaan['rendah'], produksi['tinggi'])

permintaan.view()

persediaan.view()

produksi.view()

produksi_ctrl = ctrl.ControlSystem([rule1, rule2, rule3, rule4, rule5, rule6, rule7, rule8, rule9])

banyak_produksi = ctrl.ControlSystemSimulation(produksi_ctrl)

banyak_produksi.input['Permintaan Produk'] = 35
banyak_produksi.input['Persediaan Produk'] = 17
banyak_produksi.compute()

print(banyak_produksi.output['Banyak Produksi'])
produksi.view(sim=banyak_produksi)
